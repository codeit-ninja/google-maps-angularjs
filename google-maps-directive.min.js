!function(){"use strict";angular.module("GoogleMaps",[]).factory("GoogleMaps",function(o,e,t,n,r,l,s,a){var i={createMap:function(o,e,t,n,r,l,s){var a=Math.random().toString(36).substr(2,9);s.attr("id",a),o.clickableIcons=!1;var i=new google.maps.Map(document.getElementById(a),o),c=(new google.maps.InfoWindow,new google.maps.LatLngBounds);for(var p in e){var u=new google.maps.Marker({position:new google.maps.LatLng(e[p].lat,e[p].lng),map:i,icon:t});e.length>1&&r?(c.extend(u.position),i.fitBounds(c)):(i.setCenter(e[l]),i.setZoom(n))}},addressToCoordinates:function(o){return e.get("https://maps.googleapis.com/maps/api/geocode/json?address="+o+"&key=AIzaSyDYrkvFvaOOB1bLLS40mTwHG2B5_G4t-c0").then(function(o){return o.data.results[0].geometry.location.lat+" "+o.data.results[0].geometry.location.lng})},setCoordinates:function(o){for(var e=s.defer(),t=(o=o.split(";"),new Array),n=0;n<o.length;n++)if(new RegExp(/^-?([1-8]?[1-9]|[1-9]0)\.{1}\d{1,6}/).exec(o[n]))t.push(o[n]);else var r=i.addressToCoordinates(o[n]).then(function(o){t.push(o)});return"object"==typeof r?r.then(function(o){e.resolve(t)}):e.resolve(t),e.promise}};return i}).directive("googleMaps",function(o,e,t){return{restrict:"E",scope:{markers:"@",center:"@",focusOn:"@",backgroundColor:"@",clickableIcons:"@",disableDefaultUi:"@",disableDoubleClickZoom:"@",draggingCursor:"@",fullscreenControl:"@",fullscreenControlOptions:"@",gestureHandling:"@",heading:"@",keyboardShortcuts:"@",mapTypeControl:"@",mapTypeControlOptions:"@",mapTypeId:"@",maxZoom:"@",minZoom:"@",noClear:"@",rotateControl:"@",scaleControl:"@",scaleControlOptions:"@",streetView:"@",streetViewControl:"@",streetViewControlOptions:"@",styles:"@",tilt:"@",zoom:"@",zoomControl:"@",zoomControlOptions:"@"},link:function(o,e,n){if(o.markers){var r=[],l={backgroundColor:o.backgroundColor,clickableIcons:o.clickableIcons,disableDefaultUI:o.disableDefaultUi,disableDoubleClickZoom:o.disableDoubleClickZoom,draggingCursor:o.draggingCursor,fullscreenControl:o.fullscreenControl,fullscreenControlOptions:o.fullscreenControlOptions,gestureHandling:o.gestureHandling,heading:o.heading,keyboardShortcuts:o.keyboardShortcuts,mapTypeControl:o.mapTypeControl,mapTypeControlOptions:o.mapTypeControlOptions,mapTypeId:o.mapTypeId,maxZoom:o.maxZoom,minZoom:o.minZoom,noClear:o.noClear,rotateControl:o.rotateControl,scaleControl:o.scaleControl,scaleControlOptions:o.scaleControlOptions,streetView:o.streetView,streetViewControl:o.streetViewControl,streetViewControlOptions:o.streetViewControlOptions,styles:o.styles,tilt:o.tilt,zoomControl:o.zoomControl,zoomControlOptions:o.zoomControlOptions};t.setCoordinates(o.markers).then(function(o){for(var s in o){var a=o[s].split(" ");r.push({lat:Number(a[0]),lng:Number(a[1])})}var i=n.icon?n.icon:"",c=n.zoom?Number(n.zoom):8,p="false"!=n.center,u=n.focusOn?Number(n.focusOn):0;t.createMap(l,r,i,c,p,u,e)})}}}})}();
